<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>College Room Scheduler</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>üè´ College Room Scheduler</h1>
    <p>Upload timetable PDFs, auto-extract rooms & schedules, find free slots</p>
  </header>

  <main>
    <!-- Upload PDF -->
    <div class="card">
      <h2>Upload Timetable PDF</h2>
      <p class="hint">Upload a timetable PDF. Department, year, section, and rooms are extracted automatically.</p>
      <form id="uploadForm">
        <label>PDF File: <input type="file" id="pdfFile" accept=".pdf" required></label>
        <button type="submit">Upload & Parse</button>
      </form>
      <div id="uploadLoader" class="loader" style="display:none">
        <div class="spinner"></div>
        <span>Processing PDF‚Ä¶ This may take a moment for large files.</span>
      </div>
      <p id="uploadMsg" class="msg"></p>
      <div id="parsedPreview" class="preview"></div>
    </div>

    <!-- Uploaded PDFs -->
    <div class="card">
      <h2>Uploaded PDFs</h2>
      <div id="uploadedPdfs"></div>
    </div>

    <!-- Uploaded Timetables -->
    <div class="card">
      <h2>Uploaded Timetables</h2>
      <button onclick="loadTimetables()">Refresh</button>
      <table id="ttTable">
        <thead><tr><th>ID</th><th>Department</th><th>Sem</th><th>Section</th><th>Room</th><th>File</th><th>Action</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="card" id="scheduleCard" style="display:none">
      <h2>Schedule ‚Äî Timetable View</h2>
      <div id="scheduleGrid"></div>
    </div>

    <!-- Find Free Rooms -->
    <div class="card highlight">
      <h2>üîç Find Free Rooms</h2>
      <p class="hint">Pick a day and your desired time range to find available rooms.</p>
      <div class="row">
        <label>Day:
          <select id="findDay"></select>
        </label>
        <label>From:
          <input type="time" id="findFrom" value="09:00">
        </label>
        <label>To:
          <input type="time" id="findTo" value="10:50">
        </label>
      </div>
      <button onclick="findFreeRooms()">Search Free Rooms</button>
      <div id="freeResults" style="margin-top:1rem"></div>
    </div>
  </main>

  <script src="app.js"></script>
</body>
</html>
